# Redis Configuration
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# WhisperX Configuration
# Model options: tiny, base, small, medium, large-v2, large-v3
WHISPER_MODEL=large-v2
# Device: cuda (GPU) or cpu
WHISPER_DEVICE=cuda
# Compute type: float16 (GPU), int8 (GPU/CPU), float32 (CPU)
WHISPER_COMPUTE_TYPE=float16

# Epic 3 - Pluggable Optimizer Architecture (Story 3.2a)
# Optimizer engine selection: "whisperx" | "heuristic" | "auto"
# - "whisperx": Use WhisperX wav2vec2 forced alignment (requires pyannote.audio)
# - "heuristic": Use self-developed VAD+refinement+splitting pipeline
# - "auto": Prefer WhisperX, fallback to Heuristic if unavailable (default)
OPTIMIZER_ENGINE=auto
# Enable/disable optimization pipeline (feature flag)
ENABLE_OPTIMIZATION=true

# Epic 3 - Optimization Pipeline Configuration (Stories 3.3-3.5)

# VAD Preprocessing (Story 3.2)
ENABLE_VAD=false
# VAD aggressiveness: 0 (least aggressive) to 3 (most aggressive)
VAD_AGGRESSIVENESS=3

# BELLE-2 Decoder Parameters (Story 3.2)
BELLE2_BEAM_SIZE=5
BELLE2_TEMPERATURE=0.0,0.2,0.4,0.6,0.8,1.0

# Timestamp Refinement (Story 3.3)
ENABLE_TIMESTAMP_REFINEMENT=true
# Search range for boundary refinement in milliseconds
REFINEMENT_SEARCH_RANGE_MS=200
# Energy analysis window in milliseconds
ENERGY_WINDOW_MS=50

# Segment Splitting (Story 3.4)
ENABLE_SEGMENT_SPLITTING=true
# Maximum segment duration in seconds
SEGMENT_MAX_DURATION=7.0
# Maximum segment character count
SEGMENT_MAX_CHARS=200
# Minimum segment duration in seconds (for merging)
SEGMENT_MIN_DURATION=1.0
# Estimated duration per Chinese character
CHINESE_CHAR_DURATION=0.4

# File Storage
UPLOAD_DIR=/uploads
# Max file size in bytes (default: 2GB)
MAX_FILE_SIZE=2147483648
# Max audio duration in hours
MAX_DURATION_HOURS=2

# CORS Configuration (Development - update for production)
# Frontend origin for cross-origin requests
CORS_ORIGINS=["http://localhost:5173"]
